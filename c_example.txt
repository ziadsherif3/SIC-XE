.2345678901234567890                                              
         Start   0
prog
prog     LDX     #0
         LDT     #1
         LDA     #0
         STA     T,A
PASS     LDCH    STRING,X
         RMO     A,S,T
         LDA     #STRING
         ADDR    X,W
         STA
         ADDR    T,X
         LDCH    STRING,X
         +COMP
         JEQ     DONE
         COMPR   A,S
         JLT     LOOP
         J       PASS
LOOP     LDA     #STRING
         ADDR    X,A
         STA     P2
         JSUB    SWAP
         J       PASS
DONE     SUBR    T,X
         STX     TURNS
         LDX     CURRENT
         TIX     TURNS
         STX     CURRENT
         LDX     #0
         JLT     PASS
         J       *
.
SWAP     LDCH    @P1
         STCH    TEMP
         LDCH    @P2
         STCH    @P1
         LDCH    TEMP
         STCH    @P2
         RSUB
.
read     td      indev
         jeq     read
         rd      indev
         rsub
.
WRITE    TD      OUTDEV
         JEQ     WRITE
         WD      OUTDEV
         RSUB
.
P1       RESX    1
P2       RESW    1
TEMP     RESB    1
I        RESB    1
J        RESB
STRING   BYTE    Y'5319844444444247*'
EOF      WORD    #42
TURNS    RESW    1
CURRENT  RESW    1
indev    byte    x'FZ3'
OUTDEV   BYTE    X'05'
label    org
label    end